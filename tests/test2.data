<?xml version="1.0"?>
<!DOCTYPE testcmd SYSTEM "testcmd.dtd">
<!-- 
     File : test2.data     
     Author: Keith Isdale <k_isdale@tpg.com.au>
     Description: xml data that decribes what to do for "test2"
     Copyright Reserved Under GPL     
-->
 <!-- Test apply templates and  call template instructions
      Test break and showbreak commands  -->
<testcmd>
<cmd>
<test>trace</test>
<result>
<!-- Result of test -->
<!-- Basic xsl:apply-templates, xsl:call-template usage -->
<row>
<breakpoint line="18"/> <!-- xsldbg restarting with tracing on -->
</row>
<row>
<breakpoint line="18"/>
</row>
<row>
<breakpoint line="18"/>
</row>
<!-- Test basic usage of xsl:fallback -->
<row>
<breakpoint line="21"/>
</row>
<row>
<breakpoint line="104"/>
</row>
<row>
<breakpoint line="104"/>
</row>
<row>
<breakpoint line="105"/>
</row>
<row>
<breakpoint line="106"/> <!-- can't debug xsl:fallback parent node  --> 
</row>
<row>
<breakpoint line="110"/>
</row>
<row>
<breakpoint line="111"/>  <!-- text node being proccesed-->
</row>

<!-- Basic xsl:apply-templates       -->
<row>
<breakpoint line="25"/>
</row>
<row>
<breakpoint line="67"/> <!-- name="fred" -->
</row>
<row>
<breakpoint line="67"/> <!-- name="barney" -->
</row>
<row>
<breakpoint line="67"/> <!-- name="wilma" -->
</row>


<!-- Test basic usage of xsl:call-template -->
<row>
<breakpoint line="27"/>
</row>
<row>
<breakpoint line="80"/>
</row>
<row>
<breakpoint line="80"/>
</row>
<row>
<breakpoint line="81"/>
</row>

<!-- Result of test -->
<!-- Test xsl:apply-templates with parameter value. 
Test the ability to step into a xsl:with-param child -->
<row>
<breakpoint line="31"/>
</row>
<row>
<breakpoint line="32"/>
</row>
<row>
<breakpoint line="33"/>
</row>
<row>
<breakpoint line="67"/> <!-- name="fred" -->
</row>
<row>
<breakpoint line="67"/> <!-- name="barney" -->
</row>
<row>
<breakpoint line="67"/> <!-- name="wilma" -->
</row>


<!-- Results of test  -->
<!-- Test xsl:call-template with parameter value
Test the ability to step into a xsl:with-param child -->
<row>
<breakpoint line="39"/>
</row>
<row>
<breakpoint line="40"/>
</row>
<row>
<breakpoint line="41"/>
</row>
<row>
<breakpoint line="84"/>
</row>
<row>
<breakpoint line="84"/>
</row>
<row>
<breakpoint line="87"/>
</row>
<row>
<breakpoint line="87"/> <!-- test node processing -->
</row>
<row>
<breakpoint line="88"/>
</row>
<row>
<breakpoint line="90"/> <!-- test node processing -->
</row>

<!-- Results for test -->
<!-- Test ability to step into xsl:param from xsl:apply-templates -->
<row>
<breakpoint line="46"/>
</row>
<row>
<breakpoint line="72"/>
</row>
<row>
<breakpoint line="74"/>
</row>
<row>
<breakpoint line="72"/>
</row>

<!-- Results for test -->
<!-- Test ability to step into xsl:param from xsl:call-template -->
<row>
<breakpoint line="49"/>
</row>
<row>
<breakpoint line="93"/>
</row>
<row>
<breakpoint line="95"/>
</row>
<row>
<breakpoint line="93"/>
</row>
<row>
<breakpoint line="98"/>
</row>
<row>
<breakpoint line="98"/>
</row>
<row>
<breakpoint line="100"/>
</row>
<row>
<breakpoint line="100"/>
</row>
<row>
<breakpoint line="101"/>
</row>

<!-- Result of test -->
<!-- Test ability to step into xsl:sort from xsl:apply-templates -->
<row>
<breakpoint line="52"/>
</row>
<row>
<breakpoint line="53"/>
</row>
<row>
<breakpoint line="53"/>
</row>
<row>
<breakpoint line="67"/> <!-- name="fred" -->
</row>
<row>
<breakpoint line="67"/> <!-- name="barney" -->
</row>
<row>
<breakpoint line="67"/> <!-- name="wilma" -->
</row>

<!-- Test xsl:apply-templates -->
<row>
<breakpoint line="56"/>
</row>
<!-- End of tests -->
</result>
</cmd>

<!-- test the ability to add/delete show breakpoints -->
<cmd>
<test>run
break /</test>
<result>
<row>
<matchtext>Reached template: \"/\"</matchtext>
</row>
</result>
</cmd>
<cmd>
<test>break -l</test>
<result>
<row>
<matchtext>Error: Invalid arguments to command break</matchtext>
</row>
</result>
</cmd>
<cmd>
<test>break -l test2.xsl</test>
<result>
<row>
<matchtext>Error: Invalid arguments to command break</matchtext>
</row>
</result>
</cmd>
<cmd>
<test>break -l test2.xsl a23</test>
<result>
<row>
<matchtext>Error: Unable to parse a23 as a line number</matchtext>
</row>
</result>
</cmd>
<cmd>
<test>break BAD_TEMPLATENAME</test>
<result>
<row>
<matchtext>Error: No templates found</matchtext>
</row>
</result>
</cmd>
<cmd>
<test>break /
break /</test>
<result>
<row> <!-- breakkpoint exist so we should get a warning message -->
<matchtext>Warning: Breakpoint exits for file \"test2.xsl\" at line 18</matchtext>
</row>
</result>
</cmd>
<cmd>
<test>break -l test2.xsl 18</test>
<result>
<row> <!-- breakkpoint exist so we should get a warning message -->
<matchtext>Warning: Breakpoint exits for file \"test2.xsl\" at line 18</matchtext>
</row>
</result>
</cmd>


<cmd>
<test>showbreak</test>
<result>
<row>
<breakpointlist file="test2.xsl" line="18" />
</row>
</result>
</cmd>



<!-- test enable/disable comamds -->
<cmd>
<test>enable -l</test>
<result>
<row>
<matchtext>Error: Invalid arguments for command enable</matchtext>
</row>
</result>
</cmd>
<cmd>
<test>enable -l test2.xsl</test>
<result>
<row>
<matchtext>Error: Invalid arguments for command enable</matchtext>
</row>
</result>
</cmd>
<cmd>
<test>enable -l test2.xsl a23</test>
<result>
<row>
<matchtext>Error: Unable to parse a23 as a line number</matchtext>
</row>
</result>
</cmd>
<cmd>
<test>enable BAD_TEMPLATENAME</test>
<result>
<row>
<matchtext>Error: Breakpoint at template</matchtext>
</row>
</result>
</cmd>

<!-- Clear all breakpoints and create a disabled breakpoint at template "/" -->
<cmd>
<test>delete *
break /
enable /
showbreak</test>
<result>
<row>
<breakpointlist state="disabled" file="test2.xsl" line="18"/>
</row>
</result>
</cmd>

<!-- Toggle breakpoint at template "/" to enable it again-->
<cmd>
<test>enable /
showbreak</test>
<result>
<row>
<breakpointlist state="enabled" file="test2.xsl" line="18"/>
</row>
</result>
</cmd>

<!-- since enable reused the same code as enable just test
    disable of template "/" -->
<cmd>
<test>disable /
showbreak</test>
<result>
<row>
<breakpointlist state="disabled" file="test2.xsl" line="18"/>
</row>
</result>
</cmd>

<cmd>
<test>break -l test2.xsl 18</test>
<result>
<row> <!-- breakkpoint exist so we should get an error message -->
<matchtext>Error: Failed to add breakpoint for file \"test2.xsl\" at line 18</matchtext>
</row>>
</result>
</cmd>

<!-- xsldbg will be stpped at test2.xsl 18 so try setting breakpoint
     using current node -->
<cmd>
<test>break</test>
<result>
<row> <!-- breakkpoint exist so we should get an error message -->
<matchtext>Error: Failed to add breakpoint for file \"test2.xsl\" at line 18</matchtext>
</row>
</result>
</cmd>

<cmd><!-- Delete all breakpoints and set current node as a breakpoint -->
<test>delete *
break</test>
</cmd>

<cmd>
<test>showbreak</test>
<result>
<row>
<breakpointlist file="test2.xsl" line="18" />
</row>
</result>
</cmd>

<!-- Test delete command -->
<cmd>
<test>delete -l</test>
<result>
<row>
<matchtext>Error: Invalid arguments for command delete</matchtext>
</row>
</result>
</cmd>
<cmd>
<test>delete -l test2.xsl</test>
<result>
<row>
<matchtext>Error: Invalid arguments for command delete</matchtext>
</row>
</result>
</cmd>
<cmd>
<test>delete -l test2.xsl a23</test>
<result>
<row>
<matchtext>Error: Unable to parse a23 as a line number</matchtext>
</row>
</result>
</cmd>
<cmd>
<test>delete BAD_TEMPLATENAME</test>
<result>
<row>
<matchtext>Error: Breakpoint at template \"BAD_TEMPLATENAME\" does not exist</matchtext>
</row>
</result>
</cmd>
<cmd>
<test>delete *
break /
delete /
showbreak</test>
<result>
<row>
<matchtext>No breakpoints are set for the file</matchtext>
</row>
</result>
</cmd>
<cmd>
<test>break /
delete -l test2.xsl 18
showbreak</test>
<result>
<row>
<matchtext>No breakpoints are set for the file</matchtext>
</row>
</result>
</cmd>
<cmd>
<test>break /
delete *
showbreak</test>
<result>
<row>
<matchtext>No breakpoints are set for the file</matchtext>
</row>
</result>
</cmd>
<cmd>
<test>break
delete
showbreak</test>
<result>
<row>
<matchtext>No breakpoints are set for the file</matchtext>
</row>
</result>
</cmd>


<cmd>
<test>quit</test>
</cmd>

</testcmd>

<!-- initialization code for xemacs -->
<!--
Local Variables:
mode: sgml
sgml-minimize-attributes:nil
sgml-general-insert-case:lower
sgml-indent-step:0
sgml-indent-data:nil
End:
-->
